<main>
  <section class="tasks-counter">
    <span>╔═══════════════╗</span>
    <div>
      <span>║</span>
      <span>
        <span>{{ tasks.length | number : "3.0-0" }}</span>
        task(s).
      </span>
      <span>║</span>
    </div>
    <span>╚═══════════════╝</span>
  </section>
  <section class="add-task">
    <input #newTaskName type="text" placeholder="Task name" />
    <input #newTaskDesc type="text" placeholder="Task description" />
    <select #newTaskPriority>
      <option value="low">Low</option>
      <option value="medium" selected>Medium</option>
      <option value="high">High</option>
    </select>
    <button
      (click)="
        addTask(newTaskName.value, newTaskDesc.value, newTaskPriority.value)
      "
    >
      ADD
    </button>
  </section>
  <section class="tasks-list">
    <section class="tasks-to_start">
      <h2>To Start</h2>
      <ul>
        <li
          *ngFor="
            let task of tasks | filter : { status: 'to start' };
            trackBy: trackById
          "
        >
          <div class="task-main">
            <input
              type="text"
              [(ngModel)]="task.name"
              (keyup.enter)="updateTask(task)"
              (blur)="updateTask(task)"
              placeholder="Task name"
            />
            <input
              type="text"
              [(ngModel)]="task.description"
              (keyup.enter)="updateTask(task)"
              (blur)="updateTask(task)"
              placeholder="Description"
            />
          </div>
          <div class="task-controls">
            <select [(ngModel)]="task.status" (change)="updateTask(task)">
              <option value="to start">To Start</option>
              <option value="in progress">In Progress</option>
              <option value="completed">Completed</option>
            </select>
            <select [(ngModel)]="task.priority" (change)="updateTask(task)">
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
            </select>
            <button (click)="deleteTask(task.id)">×</button>
          </div>
        </li>
      </ul>
    </section>
    <section class="tasks-in_progress">
      <h2>In Progress</h2>
      <ul>
        <li
          *ngFor="
            let task of tasks | filter : { status: 'in progress' };
            trackBy: trackById
          "
        >
          <div class="task-main">
            <input
              type="text"
              [(ngModel)]="task.name"
              (keyup.enter)="updateTask(task)"
              (blur)="updateTask(task)"
              placeholder="Task name"
            />
            <input
              type="text"
              [(ngModel)]="task.description"
              (keyup.enter)="updateTask(task)"
              (blur)="updateTask(task)"
              placeholder="Description"
            />
          </div>
          <div class="task-controls">
            <select [(ngModel)]="task.status" (change)="updateTask(task)">
              <option value="to start">To Start</option>
              <option value="in progress">In Progress</option>
              <option value="completed">Completed</option>
            </select>
            <select [(ngModel)]="task.priority" (change)="updateTask(task)">
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
            </select>
            <button (click)="deleteTask(task.id)">×</button>
          </div>
        </li>
      </ul>
    </section>
    <section class="tasks-completed">
      <h2>Completed</h2>
      <ul>
        <li
          *ngFor="
            let task of tasks | filter : { status: 'completed' };
            trackBy: trackById
          "
        >
          <div class="task-main">
            <input
              type="text"
              [(ngModel)]="task.name"
              (keyup.enter)="updateTask(task)"
              (blur)="updateTask(task)"
              placeholder="Task name"
            />
            <input
              type="text"
              [(ngModel)]="task.description"
              (keyup.enter)="updateTask(task)"
              (blur)="updateTask(task)"
              placeholder="Description"
            />
          </div>
          <div class="task-controls">
            <select [(ngModel)]="task.status" (change)="updateTask(task)">
              <option value="to start">To Start</option>
              <option value="in progress">In Progress</option>
              <option value="completed">Completed</option>
            </select>
            <select [(ngModel)]="task.priority" (change)="updateTask(task)">
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
            </select>
            <button (click)="deleteTask(task.id)">×</button>
          </div>
        </li>
      </ul>
    </section>
  </section>
</main>
